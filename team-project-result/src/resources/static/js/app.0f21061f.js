(function(e){function t(t){for(var r,i,o=t[0],c=t[1],d=t[2],l=0,v=[];l<o.length;l++)i=o[l],Object.prototype.hasOwnProperty.call(s,i)&&s[i]&&v.push(s[i][0]),s[i]=0;for(r in c)Object.prototype.hasOwnProperty.call(c,r)&&(e[r]=c[r]);u&&u(t);while(v.length)v.shift()();return n.push.apply(n,d||[]),a()}function a(){for(var e,t=0;t<n.length;t++){for(var a=n[t],r=!0,o=1;o<a.length;o++){var c=a[o];0!==s[c]&&(r=!1)}r&&(n.splice(t--,1),e=i(i.s=a[0]))}return e}var r={},s={app:0},n=[];function i(t){if(r[t])return r[t].exports;var a=r[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,i),a.l=!0,a.exports}i.m=e,i.c=r,i.d=function(e,t,a){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(i.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)i.d(a,r,function(t){return e[t]}.bind(null,r));return a},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],c=o.push.bind(o);o.push=t,o=o.slice();for(var d=0;d<o.length;d++)t(o[d]);var u=c;n.push([0,"chunk-vendors"]),a()})({0:function(e,t,a){e.exports=a("56d7")},"166f":function(e,t,a){},"25a3":function(e,t,a){},"2b88d":function(e,t,a){},3226:function(e,t,a){},"3ccd":function(e,t,a){"use strict";a("c8e1")},"4f0f":function(e,t,a){"use strict";a("6d4f")},"56d7":function(e,t,a){"use strict";a.r(t);a("e260"),a("e6cf"),a("cca6"),a("a79d"),a("e792"),a("0cdd");var r=a("2b0e"),s=(a("d3b7"),a("bc3a")),n=a.n(s),i={},o=n.a.create(i);o.interceptors.request.use((function(e){return e}),(function(e){return Promise.reject(e)})),o.interceptors.response.use((function(e){return e}),(function(e){return Promise.reject(e)})),Plugin.install=function(e){e.axios=o,window.axios=o,Object.defineProperties(e.prototype,{axios:{get:function(){return o}},$axios:{get:function(){return o}}})},r["default"].use(Plugin);Plugin;var c=a("5f5b");a("ab8b"),a("2dd8");r["default"].use(c["a"]);var d=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"app"}},[a("router-view")],1)},u=[],l=(a("5c0b"),a("2877")),v={},h=Object(l["a"])(v,d,u,!1,null,null,null),p=h.exports,m=a("8c4f"),f=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"app-main"}},[a("MainAttache",{attrs:{carData:e.carData,carReserveData:e.carReserveData,carCounts:e.carCounts,displayCarData:e.displayCarData,searchAddress:e.searchAddress},on:{setSearchAddress:e.setSearchAddress,toggleDisplayCarData:e.toggleDisplayCarData}}),a("Map",{on:{setCarData:e.setCarData,setCarCount:e.setCarCount,setCarReserveData:e.setCarReserveData,toggleDisplayCarData:e.toggleDisplayCarData,setSearchAddress:e.setSearchAddress}})],1)},g=[],C=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("b-toast",{attrs:{id:"access-block",toaster:"b-toaster-top-center",variant:"danger",solide:""},scopedSlots:e._u([{key:"toast-title",fn:function(){return[a("div",{staticClass:"d-flex flex-grow-1 align-items-baseline"},[a("strong",{staticClass:"mr-auto"},[e._v("접근 오류")])])]},proxy:!0}])},[e._v(" 로그인이 필요한 접근입니다. 로그인을 해주세요. ")]),a("div",{directives:[{name:"b-toggle",rawName:"v-b-toggle.sidebar",modifiers:{sidebar:!0}}],staticClass:"menu-btn public-shadow",on:{click:function(t){e.closeCardata(),e.getUserCarReserveState(),e.getUserCarReturnState()}}},[e._m(0)]),a("b-sidebar",{staticClass:"menu-sidebar",attrs:{id:"sidebar",backdrop:"","no-header":""},scopedSlots:e._u([{key:"footer",fn:function(){return[a("div",{staticClass:"sidebar-footer"},[e.isLoggedIn()?e._e():a("div",{staticStyle:{display:"flex"}},[a("div",{attrs:{id:"signin"}},[a("router-link",{attrs:{to:"/signin"}},[e._v("로그인")])],1),a("div",{attrs:{id:"signup"}},[a("router-link",{attrs:{to:"/signup"}},[e._v("회원가입")])],1)]),e.isLoggedIn()?a("div",{attrs:{id:"signout"}},[a("a",{staticStyle:{cursor:"pointer"},on:{click:function(t){return e.signOut()}}},[e._v("로그아웃")])]):e._e()])]},proxy:!0}])},[a("div",{staticClass:"sidebar-body"},[a("div",{attrs:{id:"username"}},[e._v(" "+e._s(e.isLoggedIn()?e.getUsername():"로그인을 해주세요.")+" ")]),a("div",{attrs:{id:"useremail"}},[e._v(" "+e._s(e.userId)+" ")]),a("div",{attrs:{id:"sidebarlist"}},[a("a",{on:{click:function(t){return e.gotoMyCarReserve()}}},[e._v("예약확인")]),a("span",{staticClass:"sidebar-badge",class:{"badge-hide":0===e.carReserveState,"badge-success":1===e.carReserveState}})]),a("div",{attrs:{id:"sidebarlist"}},[a("a",{on:{click:function(t){return e.gotoMyCarReturn()}}},[e._v("반납하기")]),a("span",{staticClass:"sidebar-badge",class:{"badge-hide":0===e.carReturnState,"badge-success":1===e.carReturnState,"badge-danger":2===e.carReturnState}})]),a("div",{attrs:{id:"sidebarlist"}},[a("a",{attrs:{href:"#"}},[e._v("고객센터")])]),a("div",{attrs:{id:"sidebarlist"}},[a("a",{attrs:{href:"#"}},[e._v("사고접수&현황")])]),e.userIsAdmin?a("div",{staticClass:"pt-5"},[a("button",{attrs:{id:"sidebarbutton"}},[e._v("관리자 페이지")])]):e._e()])]),a("div",{staticClass:"bottom-content"},[a("div",{staticClass:"menu-address public-shadow",class:{"menu-address-active":null!==e.searchAddress},on:{click:function(t){return e.gotoAddress()}}},[e._m(1),a("div",{staticClass:"menu-address-text"},[e._v(" "+e._s(null===e.searchAddress?"어디에서 출발하나요？":e.searchAddress)+" ")])]),e.displayCarData?a("div",{staticClass:"menu-cardata"},[a("div",{staticClass:"cardata-top"},[a("div",{staticClass:"cardata-count"},[e._v(" 해당 지역에 차량이 "),a("span",{staticStyle:{color:"#83C1BC"}},[e._v(e._s(e.carCounts))]),e._v(" 대 있습니다. ")]),a("div",{staticClass:"cardata-close"},[a("i",{staticClass:"fas fa-times",on:{click:function(t){return e.closeCardata()}}})])]),a("div",{staticClass:"cardata"},[e._l(e.carData,(function(t){return a("div",{key:t.carIndex,staticClass:"cardata-items"},[a("div",[a("div",{staticClass:"cardata-items-body"},[a("div",{staticClass:"cardata-items-image"},[a("div",{on:{click:function(a){return e.gotoCarDetail(t.carIndex)}}})]),a("div",{staticClass:"cardata-items-info"},[a("div",{staticClass:"cardata-name"},[e._v(e._s(t.carModel))]),a("div",{staticClass:"cardata-fuel"},[a("i",{staticClass:"fas fa-gas-pump"}),e._v(" "+e._s("휘발유 "+t.carFuel+"%"))]),a("div",{staticClass:"cardata-clear"},[e._v(e._s(t.carClear?"최근세차":""))]),a("div",{staticClass:"cardata-price"},[a("span",[e._v(e._s(e.numberFormat(t.carPrice)+"원"))])])])]),a("div",{staticClass:"cardata-items-bottom"},[a("button",{staticClass:"cardata-button",on:{click:function(a){return e.gotoCarReserve(t.carIndex)}}},[e._v(" 예약하기 ")])])])])})),e._l(e.carReserveData,(function(t){return a("div",{key:t.carIndex,staticClass:"cardata-items"},[a("div",{staticClass:"cardata-reserved"},[a("div",{staticClass:"cardata-items-body"},[a("div",{staticClass:"cardata-items-image"},[a("div",{on:{click:function(a){return e.gotoCarDetail(t.carIndex)}}})]),a("div",{staticClass:"cardata-items-info"},[a("div",{staticClass:"cardata-name"},[e._v(e._s(t.carModel))]),a("div",{staticClass:"cardata-fuel"},[a("i",{staticClass:"fas fa-gas-pump"}),e._v(" "+e._s("휘발유 "+t.carFuel+"%"))]),a("div",{staticClass:"cardata-clear"},[e._v(e._s(t.carClear?"최근세차":""))]),a("div",{staticClass:"cardata-price"},[a("span",[e._v(e._s(e.numberFormat(t.carPrice)+"원"))])])])]),a("div",{staticClass:"cardata-items-bottom"},[a("button",{staticClass:"cardata-button btn-not-allow",on:{click:function(a){return e.gotoCarReserve(t.carIndex)}}},[e._v(" 예약하기 ")])])])])}))],2)]):e._e()])],1)},D=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"menu-icon"},[a("i",{staticClass:"fas fa-bars"})])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"menu-address-icon"},[a("i",{staticClass:"fas fa-search"})])}],_=(a("ac1f"),a("5319"),a("25f0"),{props:["carData","carReserveData","carCounts","displayCarData","searchAddress"],data:function(){return{userIndex:0,userName:"",userId:"",userNickname:"",userRegnum:"",userRegnumGender:1,userProfile:"",userPhone:"",userIsAdmin:0,userIsBlock:0,carReserveState:0,carReturnState:0}},mounted:function(){var e=sessionStorage.getItem("_SearchAddress");null!==e&&this.$emit("setSearchAddress",e);var t=sessionStorage.getItem("_UserConn-ID"),a=sessionStorage.getItem("_UserConn-PASSWORD");if(""===t||null===t||""===a||null===a)console.log("Sign in failed.");else{this.verifyBlockedUser(t,a);var r=this;r.$axios.get("http://localhost:8090/teamcarsharing/api/GetUserFromSession",{params:{userId:t,userPw:a}}).then((function(e){r.userIndex=e.data.userIndex,r.userName=e.data.userName,r.userId=e.data.userId,r.userNickname=e.data.userNickname,r.userRegnum=e.data.userRegnum,r.userRegnumGender=e.data.userRegnumGender,r.userProfile=e.data.userProfile,r.userPhone=e.data.userPhone,r.userIsAdmin=e.data.isAdmin,r.userIsBlock=e.data.isBlock})).catch((function(e){console.error(e)}))}},methods:{gotoAddress:function(){this.$router.push({name:"AppAddress"})},closeCardata:function(){if(this.displayCarData){var e=sessionStorage.getItem("_SearchAddress");void 0!==e&&""!==e||(e=null),this.$emit("setSearchAddress",e);var t=document.querySelector(".menu-cardata");t.classList.add("menu-cardata-hide"),setTimeout(function(){t.classList.add("menu-cardata-hide"),this.$emit("toggleDisplayCarData",!1)}.bind(this),350)}},gotoCarDetail:function(e){var t=this;t.$axios.get("http://localhost:8090/teamcarsharing/api/GetCarData",{params:{carIndex:e}}).then((function(e){alert("모델: "+e.data.carModel+"\n번호: "+e.data.carNumber+"\n가격: "+e.data.carPrice+"\n승차 인원: "+e.data.carTakePerson+"\n세차 여부: "+e.data.carClear+"\n기름: "+e.data.carFuel+"\n")})).catch((function(e){console.error(e)}))},gotoCarReserve:function(e){var t=this;t.$axios.get("http://localhost:8090/teamcarsharing/api/IsCarReserved",{params:{carIndex:e}}).then((function(a){a.data?alert("해당 차량은 대여할 수 없습니다."):(localStorage.setItem("_SelectedCar",e),t.$router.push({name:"AppCarReserve"}))})).catch((function(e){console.log(e)}))},gotoMyCarReserve:function(){this.userIndex?this.$router.push({name:"AppReserve"}):this.$bvToast.show("access-block")},gotoMyCarReturn:function(){this.userIndex?this.$router.push({name:"AppReturn"}):this.$bvToast.show("access-block")},verifyBlockedUser:function(e,t){var a=this;a.$axios.get("http://localhost:8090/teamcarsharing/api/GetUserFromSession",{params:{userId:e,userPw:t}}).then((function(e){e.data.isBlock&&(alert("차단된 계정입니다."),a.signOut())})).catch((function(e){console.error(e)}))},signOut:function(){sessionStorage.removeItem("_UserConn-ID"),sessionStorage.removeItem("_UserConn-PASSWORD"),this.$router.go()},isLoggedIn:function(){return""!==this.userId},getUsername:function(){return""===this.userNickname?this.userName:this.userNickname},getUserCarReserveState:function(){var e=this;this.userIndex&&this.axios.get("http://localhost:8090/teamcarsharing/api/IsUserCarReserved",{params:{userIndex:this.userIndex}}).then((function(t){t.data?e.axios.get("http://localhost:8090/teamcarsharing/api/GetUserCarReservedData",{params:{userIndex:e.userIndex}}).then((function(t){var a=Math.floor((new Date).getTime()/1e3);t.data.reserveDateStart>a?e.carReserveState=1:e.carReserveState=0})).catch((function(e){console.error(e)})):e.carReserveState=0})).catch((function(e){console.error(e)}))},getUserCarReturnState:function(){var e=this;this.userIndex&&this.axios.get("http://localhost:8090/teamcarsharing/api/IsUserCarReserved",{params:{userIndex:this.userIndex}}).then((function(t){t.data?e.axios.get("http://localhost:8090/teamcarsharing/api/GetUserCarReservedData",{params:{userIndex:e.userIndex}}).then((function(t){var a=Math.floor((new Date).getTime()/1e3);t.data.reserveDateEnd<a?e.carReturnState=2:t.data.reserveDateEnd>=a&&t.data.reserveDateStart<=a&&(e.carReturnState=1)})).catch((function(e){console.error(e)})):e.carReturnState=0})).catch((function(e){console.error(e)}))},numberFormat:function(e){return e.toString().replace(/\B(?<!\.\d*)(?=(\d{3})+(?!\d))/g,",")}}}),b=_,S=(a("db6d"),Object(l["a"])(b,C,D,!1,null,"8eefb7c0",null)),I=S.exports,R=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"map"}})},x=[],k={data:function(){return{lat:35.14866244535633,lng:129.11355158997253,carMapInfo:[]}},mounted:function(){window.kakao&&window.kakao.maps?this.initMap():this.initScript();var e=this;e.$axios.get("http://localhost:8090/teamcarsharing/api/GetCarCountFromUniqueLocation").then((function(t){e.carMapInfo=t.data})).catch((function(e){console.error(e)}))},methods:{initMap:function(){var e=this,t=document.getElementById("map"),a={center:new kakao.maps.LatLng(e.lat,e.lng),level:3},r=new kakao.maps.Map(t,a),s=sessionStorage.getItem("_SearchAddress");if(null!==s&&""!==s){var n=new kakao.maps.services.Geocoder;n.addressSearch(s,(function(e,t){if(t===kakao.maps.services.Status.OK){var a=new kakao.maps.LatLng(e[0].y,e[0].x),s="http://localhost:8090/images/marker/marker.png",n=new kakao.maps.Size(56,56),i={offset:new kakao.maps.Point(27,56)};new kakao.maps.Marker({map:r,image:new kakao.maps.MarkerImage(s,n,i),position:a});r.setCenter(a)}}))}if(e.carMapInfo.length>0){var i=function(t){c=new kakao.maps.services.Geocoder,c.addressSearch(e.carMapInfo[t].carLocation,(function(a,s){if(s===kakao.maps.services.Status.OK){var n="";1==e.carMapInfo[t].carCount?n="http://localhost:8090/images/marker/car_marker_1.png":2==e.carMapInfo[t].carCount?n="http://localhost:8090/images/marker/car_marker_2.png":e.carMapInfo[t].carCount>=3&&(n="http://localhost:8090/images/marker/car_marker_3.png");var i=new kakao.maps.Size(56,56),o={offset:new kakao.maps.Point(27,62)},c=new kakao.maps.Marker({position:new kakao.maps.LatLng(a[0].y,a[0].x),image:new kakao.maps.MarkerImage(n,i,o),clickable:!0});kakao.maps.event.addListener(c,"click",(function(){e.$axios.get("http://localhost:8090/teamcarsharing/api/GetAllowReserveCarFromLocation",{params:{location:e.carMapInfo[t].carLocation}}).then((function(a){e.$emit("setCarData",a.data),e.$emit("setSearchAddress",e.carMapInfo[t].carLocation)})).catch((function(e){console.error(e)})),e.$axios.get("http://localhost:8090/teamcarsharing/api/GetAllowReserveCarCountFromLocation",{params:{location:e.carMapInfo[t].carLocation}}).then((function(t){e.$emit("setCarCount",t.data)})).catch((function(e){console.error(e)})),e.$axios.get("http://localhost:8090/teamcarsharing/api/GetReserveCarFromLocation",{params:{location:e.carMapInfo[t].carLocation}}).then((function(t){e.$emit("setCarReserveData",t.data)})).catch((function(e){console.error(e)})),e.$emit("toggleDisplayCarData",!0)})),c.setMap(r)}}))};for(var o in e.carMapInfo){var c;i(o)}}},initScript:function(){var e=this,t=document.createElement("script");t.onload=function(){return kakao.maps.load(e.initMap)},t.src="http://dapi.kakao.com/v2/maps/sdk.js?autoload=false&appkey=f937c1ec371ef909f5e2b374d9a73ce8&libraries=services",document.head.appendChild(t)}}},E=k,w=(a("7658"),Object(l["a"])(E,R,x,!1,null,"39b9d17c",null)),y=w.exports,M={components:{MainAttache:I,Map:y},data:function(){return{displayCarData:!1,searchAddress:null,carData:[],carReserveData:[],carCounts:0}},methods:{setCarData:function(e){this.carData=e},setCarCount:function(e){this.carCounts=e},setCarReserveData:function(e){this.carReserveData=e},setSearchAddress:function(e){this.searchAddress=e},toggleDisplayCarData:function(e){this.displayCarData=e}}},P=M,A=Object(l["a"])(P,f,g,!1,null,"c45d447a",null),T=A.exports,N=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"app-address"}},[a("div",{staticClass:"address-body"},[a("div",{staticClass:"address-header"},[a("div",{staticClass:"address-input",on:{click:function(t){return e.openAddressEmbed()}}},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.address,expression:"address"}],attrs:{type:"text",placeholder:"어디에서 출발하나요？",disabled:""},domProps:{value:e.address},on:{input:function(t){t.target.composing||(e.address=t.target.value)}}})]),a("div",{staticClass:"address-search"},[a("i",{staticClass:"fas fa-location-arrow",staticStyle:{cursor:"pointer"},on:{click:function(t){return e.searchAddress()}}})])]),a("div",{staticClass:"address-main"},[a("div",{ref:"addrembed",staticClass:"address-embed"})])])])},$=[],O={data:function(){return{address:""}},methods:{openAddressEmbed:function(){var e=this;new window.daum.Postcode({oncomplete:function(t){var a=t.roadAddress;e.address=a,sessionStorage.setItem("_SearchAddress",e.address)},width:"100%",height:"100%"}).embed(this.$refs.addrembed)},searchAddress:function(){null===this.address||""===this.address?alert("주소를 입력하세요."):(this.$router.push({name:"AppMain"}),this.$router.go())}}},U=O,G=(a("4f0f"),Object(l["a"])(U,N,$,!1,null,"04417ca3",null)),L=G.exports,F=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"signin"}},[a("div",{staticClass:"form"},[a("div",[e._v("ID: "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.inputId,expression:"inputId"}],attrs:{type:"text"},domProps:{value:e.inputId},on:{input:function(t){t.target.composing||(e.inputId=t.target.value)}}})]),a("br"),a("div",[e._v("PW: "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.inputPw,expression:"inputPw"}],attrs:{type:"text"},domProps:{value:e.inputPw},on:{input:function(t){t.target.composing||(e.inputPw=t.target.value)}}})]),a("br"),a("div",[a("button",{on:{click:function(t){return e.signIn()}}},[e._v("로그인")])])])])},j=[],B={data:function(){return{inputId:"",inputPw:"",userData:null}},methods:{signIn:function(){var e=this;e.$axios.get("http://localhost:8090/teamcarsharing/api/GetUser",{params:{userId:e.inputId,userPw:e.inputPw}}).then((function(t){e.userData=t.data,0===e.userData.length?alert("아이디 또는 비밀번호가 틀렸습니다."):(sessionStorage.setItem("_UserConn-ID",e.userData.userId),sessionStorage.setItem("_UserConn-PASSWORD",e.userData.userPw),e.$router.push({name:"AppMain"}))})).catch((function(e){console.error(e)}))}},mounted:function(){sessionStorage.removeItem("_UserConn-ID"),sessionStorage.removeItem("_UserConn-PASSWORD")}},V=B,q=(a("3ccd"),Object(l["a"])(V,F,j,!1,null,"5d9f9555",null)),W=q.exports,z=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"root"}},[a("div",{attrs:{id:"carinfo"}},[e._v(" 모델 명: "+e._s(e.carModel)+" "),a("br"),e._v(" 가격: "+e._s(e.carPrice+e.getReservePrice())+" 원 "),a("br")]),a("div",{attrs:{id:"reservedate"}},[e._v(" 대여 시간: "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.reserveStartDateDisplay,expression:"reserveStartDateDisplay"}],attrs:{type:"text",id:"start_reserve",disabled:""},domProps:{value:e.reserveStartDateDisplay},on:{input:function(t){t.target.composing||(e.reserveStartDateDisplay=t.target.value)}}}),e._v(" 반납 시간: "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.reserveEndDateDisplay,expression:"reserveEndDateDisplay"}],attrs:{type:"text",id:"end_reserve",disabled:""},domProps:{value:e.reserveEndDateDisplay},on:{input:function(t){t.target.composing||(e.reserveEndDateDisplay=t.target.value)}}})]),a("div",{attrs:{id:"control"}},[a("span",{on:{click:function(t){return e.subReserveStartDate(600)}}},[a("i",{staticClass:"far fa-caret-square-left"})]),a("span",{staticStyle:{"margin-right":"200px"},on:{click:function(t){return e.addReserveStartDate(600)}}},[a("i",{staticClass:"far fa-caret-square-right"})]),a("span",{on:{click:function(t){return e.subReserveEndDate(600)}}},[a("i",{staticClass:"far fa-caret-square-left"})]),a("span",{on:{click:function(t){return e.addReserveEndDate(600)}}},[a("i",{staticClass:"far fa-caret-square-right"})])]),a("div",{staticStyle:{"text-align":"center"}},[e._v(" Gap: "+e._s(e.getTimeGap())+" ")])])},H=[],Y=(a("fb6a"),{data:function(){return{RESERVE_START_DATE_MIN:1800,RESERVE_MIN_GAP_TIME:1800,RESERVE_START_DATE_ROUND:10,RESERVE_COST_PRICE:1200,carIndex:null,carModel:"",carPrice:0,carImage:"",reserveStartDate:0,reserveStartDateDisplay:"",reserveEndDate:0,reserveEndDateDisplay:"",reservePrice:0}},methods:{unixToDate:function(e){var t=new Date(1e3*e);return t.getFullYear()+"-"+("00"+(t.getMonth()+1)).slice(-2)+"-"+("00"+t.getDate()).slice(-2)+" "+("00"+t.getHours()).slice(-2)+":"+("00"+t.getMinutes()).slice(-2)},isLastToday:function(e){var t=new Date(1e3*e),a=t.getHours(),r=t.getMinutes();return 23===a&&r>=50},getNow:function(){var e=new Date,t=1e3*Math.floor(e.getTime()/1e3)/1e3;return t},getNowRounded:function(){var e=6e4*this.RESERVE_START_DATE_ROUND,t=new Date,a=Math.round(t.getTime()/e)*e/1e3;return this.getNow()>=a&&(a+=600),a},getTimeGap:function(){var e=1e3*this.reserveEndDate-1e3*this.reserveStartDate;return Math.floor(e%864e5/36e5)+"시간 "+Math.floor(e%36e5/6e4)+"분"},getReservePrice:function(){var e=this.reserveEndDate-this.reserveStartDate;return e/600*this.RESERVE_COST_PRICE},setReserveStartDate:function(e){this.reserveStartDate=e,this.reserveStartDateDisplay=this.unixToDate(this.reserveStartDate)},setReserveEndDate:function(e){this.reserveEndDate=e,this.reserveEndDateDisplay=this.unixToDate(this.reserveEndDate)},subReserveStartDate:function(e){this.reserveStartDate-e>=this.getNowRounded()?this.setReserveStartDate(this.reserveStartDate-e):(this.setReserveStartDate(this.getNowRounded()),this.setReserveEndDate(this.getNowRounded()+3600))},addReserveStartDate:function(e){this.isLastToday(this.reserveEndDate)&&this.reserveEndDate-this.reserveStartDate<=this.RESERVE_MIN_GAP_TIME||(this.setReserveStartDate(this.reserveStartDate+e),this.reserveEndDate-this.reserveStartDate<this.RESERVE_MIN_GAP_TIME&&this.setReserveEndDate(this.reserveEndDate+this.RESERVE_MIN_GAP_TIME))},subReserveEndDate:function(e){this.reserveStartDate>=this.getNowRounded()&&this.reserveEndDate-this.reserveStartDate>this.RESERVE_MIN_GAP_TIME&&this.setReserveEndDate(this.reserveEndDate-e)},addReserveEndDate:function(e){this.isLastToday(this.reserveEndDate)||this.setReserveEndDate(this.reserveEndDate+e)}},mounted:function(){var e=this;e.axios.get("http://localhost:8090/teamcarsharing/api/GetCarData",{params:{carIndex:localStorage.getItem("_SelectedCar")}}).then((function(t){e.carIndex=t.data.carIndex,e.carModel=t.data.carModel,e.carPrice=t.data.carPrice,e.carImage=t.data.carImage,0!==e.carIndex&&null!==e.carIndex||e.$router.push({name:"AppMain"})})).catch((function(t){console.error(t),e.$router.push({name:"AppMain"})})),this.setReserveStartDate(this.getNowRounded()+this.RESERVE_START_DATE_MIN),this.setReserveEndDate(this.getNowRounded()+3600)}}),J=Y,K=(a("82b9"),Object(l["a"])(J,z,H,!1,null,"41f55356",null)),Q=K.exports,X=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"reserve"}},[a("div",{staticClass:"reserve-title"},[a("div",{attrs:{id:"back"}},[a("router-link",{staticStyle:{color:"#000"},attrs:{to:"/"}},[a("i",{staticClass:"fas fa-long-arrow-alt-left"})])],1),a("div",{attrs:{id:"title"}},[e._v(" 예약 정보 ")]),a("div")]),a("div",{staticClass:"reserve-main"},[e.hasReservedCar?a("div",[a("div",{staticClass:"reserve-my"},[a("div",{attrs:{id:"car-pic"}},[e._v(" 사진 ")]),a("div",{attrs:{id:"car-info"}},[a("div",{attrs:{id:"car-name"}},[e._v(e._s(e.carModel))]),a("div",{attrs:{id:"car-num"}},[e._v(e._s(e.carNumber))]),a("div",{attrs:{id:"car-location"}},[a("span",{staticStyle:{color:"#777"}},[e._v("차량 위치: ")]),e._v(e._s(e.carLocation))]),a("div",{attrs:{id:"car-reservedate"}},[e._v(e._s(e.unixToDate(e.reserveDateStart))+" ~ "+e._s(e.unixToDate(e.reserveDateEnd)))])]),a("div",{attrs:{id:"car-cancel"}},[a("b-button",{on:{click:e.reserveCancelModal}},[e._v(" 예약 취소 ")])],1)]),a("div",{attrs:{id:"cancel-info"}},[e._v(" ※ 예약을 취소하게 되면 10% 수수료 비용이 발생 됩니다. ")]),a("div",{attrs:{id:"car-cancel-min"}},[a("b-button",{on:{click:e.reserveCancelModal}},[e._v(" 예약 취소 ")])],1)]):a("div",{staticClass:"reserve-nodata"},[e._v(" 예약된 차량이 없습니다. ")])])])},Z=[],ee={data:function(){return{userIndex:0,isUserBlocked:0,reserveCarIndex:0,reserveDateStart:0,reserveDateEnd:0,reserveTotalPrice:0,hasReservedCar:!1,carModel:"",carNumber:"",carClear:0,carFuel:0,carLocation:"",carImage:""}},methods:{unixToDate:function(e){var t=new Date(1e3*e);return t.getFullYear()+"-"+("00"+(t.getMonth()+1)).slice(-2)+"-"+("00"+t.getDate()).slice(-2)+" "+("00"+t.getHours()).slice(-2)+":"+("00"+t.getMinutes()).slice(-2)},reserveCancelModal:function(){var e=this,t=this;t.$bvModal.msgBoxConfirm("예약을 취소하게 되면 수수료 10%가 발생하게 됩니다.",{title:"예약을 취소할까요?",size:"sm",buttonSize:"sm",okVariant:"danger",okTitle:"예약 취소",cancelTitle:"닫기",headerClass:"border-bottom-0",footerClass:"border-top-0",hideHeaderClose:!0,centered:!0}).then((function(a){a&&t.axios.delete("http://localhost:8090/teamcarsharing/api/DeleteUserReserveCar",{params:{userIndex:t.userIndex}}).then((function(){e.connectData(),t.$bvToast.toast("예약을 취소했습니다.",{title:"예약 취소",variant:"success",solid:!0})})).catch((function(e){console.error(e)}))})).catch((function(e){console.error(e)}))},connectData:function(){var e=this,t=sessionStorage.getItem("_UserConn-ID"),a=sessionStorage.getItem("_UserConn-PASSWORD");e.axios.get("http://localhost:8090/teamcarsharing/api/GetUserFromSession",{params:{userId:t,userPw:a}}).then((function(t){e.userIndex=t.data.userIndex,e.isUserBlocked=t.data.isBlock,0===e.userIndex||e.isUserBlocked||e.axios.get("http://localhost:8090/teamcarsharing/api/GetUserCarReservedData",{params:{userIndex:e.userIndex}}).then((function(t){e.reserveCarIndex=t.data.carIndex,e.reserveDateStart=t.data.reserveDateStart,e.reserveDateEnd=t.data.reserveDateEnd,e.reserveTotalPrice=t.data.carReservePrice;var a=Math.floor(new Date)/1e3;e.hasReservedCar=a<e.reserveDateStart,e.hasReservedCar&&e.axios.get("http://localhost:8090/teamcarsharing/api/GetCarData",{params:{carIndex:e.reserveCarIndex}}).then((function(t){e.carModel=t.data.carModel,e.carNumber=t.data.carNumber,e.carClear=t.data.carClear,e.carFuel=t.data.carFuel,e.carImage=t.data.carImage,e.carLocation=t.data.carLocation}))})).catch((function(e){console.error(e)}))})).catch((function(e){console.error(e)}))}},mounted:function(){this.connectData()}},te=ee,ae=(a("799d"),Object(l["a"])(te,X,Z,!1,null,"64eea3e4",null)),re=ae.exports,se=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"car-return"}},[a("div",{staticClass:"car-return-title"},[a("div",{attrs:{id:"back"}},[a("router-link",{staticStyle:{color:"#000"},attrs:{to:"/"}},[a("i",{staticClass:"fas fa-long-arrow-alt-left"})])],1),a("div",{attrs:{id:"title"}},[e._v(" 반납 ")]),a("div")]),a("div",{staticClass:"car-return-main"},[e.isCanReturn?a("div",{staticClass:"car-return-body"},[a("div",{staticClass:"return-my"},[a("div",{attrs:{id:"car-pic"}},[e._v(" 사진 ")]),a("div",{attrs:{id:"car-info"}},[a("div",{attrs:{id:"car-name"}},[e._v(e._s(e.carModel))]),a("div",{attrs:{id:"car-num"}},[e._v(e._s(e.carNumber))]),a("div",{attrs:{id:"car-location"}},[a("span",{staticStyle:{color:"#777"}},[e._v("반납 위치: ")]),e._v(e._s(e.carLocation))]),a("div",{attrs:{id:"car-reservedate"}},[a("span",{staticStyle:{color:"#777"}},[e._v("반납 시간: ")]),e._v(" "+e._s(e.unixToDate(e.reserveDateEnd)))])])]),a("div",{staticClass:"car-return-bottom"},[e.getTimeGap(e.getNow(),e.reserveDateEnd)>0?a("div",{staticClass:"return-info"},[e._v(" 차량 반납 까지 "),a("b",[e._v(e._s(e.formatTimeGap(e.getNow(),e.reserveDateEnd)))]),e._v(" 남았습니다. ")]):a("div",{staticClass:"return-info danger"},[e._v(" 차량 반납 시간을 초과했습니다. "),a("br"),e._v(" 현재 초과 후 "),a("b",[e._v(e._s(e.formatTimeGap(e.reserveDateEnd,e.getNow())))]),e._v(" 동안 사용하였고, 초과 이용 금액은 "),a("b",[e._v(e._s(e.numberFormat(e.getOverPrice())))]),e._v("원 입니다. ")]),a("div",{staticClass:"danger-notice"},[e._v(" ※ 초과 이용 금액은 반납 시 자동으로 결제 됩니다. ")]),a("div",{staticClass:"return-done"},[a("button",{staticClass:"return-btn",on:{click:function(t){return e.reserveCarReturn()}}},[e._v(" 반납 ")])])])]):a("div",{staticClass:"car-return-nodata"},[e._v(" 반납 가능한 대여 차량이 없습니다. ")])])])},ne=[],ie={data:function(){return{RESERVE_COST_PRICE:1200,userIndex:0,isUserBlocked:0,reserveCarIndex:0,reserveDateStart:0,reserveDateEnd:0,reserveTotalPrice:0,isCanReturn:!1,carModel:"",carNumber:"",carFuel:0,carLocation:"",carImage:""}},methods:{getNow:function(){return Math.floor((new Date).getTime()/1e3)},unixToDate:function(e){var t=new Date(1e3*e);return t.getFullYear()+"-"+("00"+(t.getMonth()+1)).slice(-2)+"-"+("00"+t.getDate()).slice(-2)+" "+("00"+t.getHours()).slice(-2)+":"+("00"+t.getMinutes()).slice(-2)},formatTimeGap:function(e,t){var a=1e3*e,r=1e3*t,s=this.getTimeGap(a,r);return Math.floor(s%864e5/36e5)+"시간 "+Math.floor(s%36e5/6e4)+"분"},getTimeGap:function(e,t){var a=t-e;return a<0?0:a},getOverPrice:function(){var e=0;if(this.getNow()>this.reserveDateEnd){var t=this.getTimeGap(this.reserveDateEnd,this.getNow());e=Math.floor(t/600*this.RESERVE_COST_PRICE)}return e},numberFormat:function(e){return e.toString().replace(/\B(?<!\.\d*)(?=(\d{3})+(?!\d))/g,",")},reserveCarReturn:function(){var e=this;this.$bvModal.msgBoxConfirm("차량을 반납할까요? "+(this.getOverPrice()>0?"초과 이용으로 인해 "+this.numberFormat(this.getOverPrice())+"원이 추가로 결제됩니다.":""),{size:"sm",buttonSize:"sm",okVariant:"success",okTitle:"반납",cancelTitle:"취소",footerClass:"p-2 border-top-0",hideHeaderClose:!0,centered:!0}).then((function(t){t&&e.axios.delete("http://localhost:8090/teamcarsharing/api/DeleteUserReserveCar",{params:{userIndex:e.userIndex}}).then((function(){e.connectData(),e.$bvToast.toast("차량을 반납했습니다. 이용해 주셔서 감사합니다.",{title:"반납",variant:"success",solid:!0})})).catch((function(e){console.error(e)}))})).catch((function(e){console.error(e)}))},connectData:function(){var e=this,t=sessionStorage.getItem("_UserConn-ID"),a=sessionStorage.getItem("_UserConn-PASSWORD");e.axios.get("http://localhost:8090/teamcarsharing/api/GetUserFromSession",{params:{userId:t,userPw:a}}).then((function(t){e.userIndex=t.data.userIndex,e.isUserBlocked=t.data.isBlock,0===e.userIndex||e.isUserBlocked||e.axios.get("http://localhost:8090/teamcarsharing/api/GetUserCarReservedData",{params:{userIndex:e.userIndex}}).then((function(t){e.reserveCarIndex=t.data.carIndex,e.reserveDateStart=t.data.reserveDateStart,e.reserveDateEnd=t.data.reserveDateEnd,e.reserveTotalPrice=t.data.carReservePrice;var a=Math.floor(new Date)/1e3;e.isCanReturn=a>=e.reserveDateStart,0===e.reserveCarIndex&&void 0===e.reserveCarIndex||e.axios.get("http://localhost:8090/teamcarsharing/api/GetCarData",{params:{carIndex:e.reserveCarIndex}}).then((function(t){e.carModel=t.data.carModel,e.carNumber=t.data.carNumber,e.carFuel=t.data.carFuel,e.carLocation=t.data.carLocation,e.carImage=t.data.carImage})).catch((function(e){console.error(e)}))})).catch((function(e){console.error(e)}))}))}},mounted:function(){this.connectData()}},oe=ie,ce=(a("e3de"),Object(l["a"])(oe,se,ne,!1,null,"f65a2326",null)),de=ce.exports;r["default"].use(m["a"]);var ue=[{path:"/",name:"AppMain",component:T},{path:"/address",name:"AppAddress",component:L},{path:"/signin",name:"AppSignIn",component:W},{path:"/carreserve",name:"AppCarReserve",component:Q},{path:"/reserve",name:"AppReserve",component:re},{path:"/return",name:"AppReturn",component:de}],le=new m["a"]({mode:"history",routes:ue}),ve=le;r["default"].config.productionTip=!1,new r["default"]({router:ve,render:function(e){return e(p)}}).$mount("#app")},"5c0b":function(e,t,a){"use strict";a("9c0c")},"6d4f":function(e,t,a){},7658:function(e,t,a){"use strict";a("2b88d")},"799d":function(e,t,a){"use strict";a("166f")},"82b9":function(e,t,a){"use strict";a("25a3")},"9c0c":function(e,t,a){},c8e1:function(e,t,a){},d517:function(e,t,a){},db6d:function(e,t,a){"use strict";a("3226")},e3de:function(e,t,a){"use strict";a("d517")}});
//# sourceMappingURL=app.0f21061f.js.map